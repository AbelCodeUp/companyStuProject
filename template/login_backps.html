
<div class="loginPwd_box">
    <ul class="loginPwd_font_top_title_box">
	    <li class="loginPwd_font_top_title loginPwd_font_top_title_item1 login_top">            
            找回密码
            <div class="login_bk">
            <a href="#" ui-sref="index.ggtlogin">
                <span></span>
                返回登录
            </a>
            </div>
        </li>
    </ul>
    <form role="form" class="loginPwd_form" name="findPwdForm">
        <div class="form-group loginPwd_form_div has-feedback"
             ng-class="{'has-success':findPwdForm.username.$valid,'has-error':findPwdForm.username.$invalid && findPwdForm.username.$touched}">
            <input type="text" name="username" class="form-control" 
                   ng-model="findPwdData.cell"    
                   placeholder="请输入11位手机号码"
                   required 
                   ng-pattern="/^1[3-9]\d{9}$/" autocomplete="off" ng-focus>
            <i class="phone-feed" ng-class="{'phone-feed-success':findPwdForm.username.$valid , 'phone-feed-error':findPwdForm.username.$invalid && findPwdForm.username.$touched}"></i>
            <div class="error-notice" ng-if="findPwdForm.username.$error.required && !findPwdForm.username.$focused">
                <span></span>
                手机号不能为空
            </div>
            <div class="error-notice" ng-if="findPwdForm.username.$error.pattern && !findPwdForm.username.$focused">
                <span></span>
                手机号码格式不正确
            </div>
        </div>
        <div class="form-group loginPwd_form_div has-feedback"
             ng-class="{'has-success':findPwdForm.code.$valid,'has-error':findPwdForm.code.$invalid && findPwdForm.code.$touched}">
            <input type="text" class="duanxin form-control" name="code" 
                    ng-model="findPwdData.code"    
                   placeholder="请输入短信验证码"
                   required  ng-pattern="/^\d{6}$/"
                   autocomplete="off" ng-focus>
            <!-- <button type='button' id='yanzhengma' onclick='sendNum($(this))'>获取短信验证码</button> -->
            <timerbutton show-timer="false" timeout="60000" teltext="findPwdData.cell" ></timerbutton>
            <div class="error-notice" ng-if="findPwdForm.code.$error.required && !findPwdForm.code.$focused">
                <span></span>
                验证码不能为空
            </div>
            <div class="error-notice" ng-if="findPwdForm.code.$error.pattern && !findPwdForm.code.$focused">
                <span></span>
                 短信验证码输入错误
            </div>
        </div>
        <div class="form-group loginPwd_form_div has-feedback" ng-class="{'has-success':findPwdForm.password.$valid,'has-error':findPwdForm.password.$invalid && findPwdForm.password.$touched}">
            <input type="password" name="password"
                placeholder="请设置新密码（6-12位）" class="form-control" 
                 ng-pattern="/^[a-zA-Z0-9!#@*-_.]{6,12}$/"
                ng-model="findPwdData.newPsw"
                required ng-focus>
            <i class="ps-feed" ng-class="{'ps-feed-success':findPwdForm.password.$valid ,'ps-feed-error':findPwdForm.password.$invalid && findPwdForm.password.$touched}"></i>
            <div class="error-notice" ng-if="findPwdForm.password.$error.required && !findPwdForm.password.$focused">
                <span></span>
                密码不能为空
            </div>
            <div class="error-notice" ng-if="findPwdForm.password.$error.pattern && !findPwdForm.password.$focused">
                <span></span>
                密码格式错误
            </div>
        </div>
        <div class="form-group">
            <button type="button" ng-disabled="findPwdForm.$invalid" ng-bind="chageText" ng-click="findpwd()" class="cnLogin ladda-button btn btn-font-size16 btn-block font-write" id="findBtn">确定</button>
        </div>
    </form>
</div>
<script>
var flage=true;
function sendNum(ele){
    if(flage){
        flage=false;
        var num=60;
        ele.html(num+"s");
        var parent=ele.parents(".loginPwd_form_div");
        parent.addClass("login_yanzhenbox");
        ele.addClass("login_yanzhen");

        var t=setInterval(function(){
            num--;
            ele.html(num+"s");
            if(num<=-1){
                num=60;
                ele.html("获取短信验证码");
                clearInterval(t);
                parent.removeClass("login_yanzhenbox");
                ele.removeClass("login_yanzhen");
                flage=true;
            }
        },1000)
    }
    
}
</script>
